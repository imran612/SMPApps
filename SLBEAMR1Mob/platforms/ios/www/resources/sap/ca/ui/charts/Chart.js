/*!
 * SAP UI development toolkit for HTML5 (SAPUI5) (c) Copyright 2009-2014 SAP SE. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.charts.Chart");jQuery.sap.require("sap.ca.ui.library");jQuery.sap.require("sap.ui.core.Control");sap.ui.core.Control.extend("sap.ca.ui.charts.Chart",{metadata:{deprecated:true,library:"sap.ca.ui",properties:{"width":{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'},"height":{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:'100%'},"dataset":{type:"object",group:"Data",defaultValue:null},"chartType":{type:"string",group:"Data",defaultValue:'Bar'},"minShapeSize":{type:"sap.ui.core.CSSSize",group:"Data",defaultValue:'48px'},"label":{type:"string",group:"Data",defaultValue:'',bindable:"bindable"},"title":{type:"string",group:"Appearance",defaultValue:''},"icon":{type:"string",group:"Appearance",defaultValue:''},"secondAxisVisible":{type:"boolean",group:"Appearance",defaultValue:true},"showLegend":{type:"boolean",group:"Behavior",defaultValue:true},"selectionMode":{type:"sap.ca.ui.charts.ChartSelectionMode",group:"Behavior",defaultValue:sap.ca.ui.charts.ChartSelectionMode.Multiple},"showHoverBackground":{type:"boolean",group:"Behavior",defaultValue:false},"showTooltip":{type:"boolean",group:"Behavior",defaultValue:false},"showPopover":{type:"boolean",group:"Behavior",defaultValue:true},"showDataLabel":{type:"boolean",group:"Behavior",defaultValue:true},"yAxisLabelFormatter":{type:"string",group:"Data",defaultValue:null},"yAxis2LabelFormatter":{type:"string",group:"Data",defaultValue:null},"xAxisLabelFormatter":{type:"string",group:"Data",defaultValue:null},"xAxis2LabelFormatter":{type:"string",group:"Data",defaultValue:null},"plotAreaAxisTooltipFormatter":{type:"object",group:"Data",defaultValue:null},"tooltipFormatter":{type:"object",group:"Data",defaultValue:null},"dataLabelFormatter":{type:"object",group:"Data",defaultValue:null},"popoverFormatter":{type:"object",group:"Data",defaultValue:null},"popoverGroupFormatter":{type:"string",group:"Data",defaultValue:null},"chartSemanticColorFormatter":{type:"object",group:"Data",defaultValue:null},"internalVizChart":{type:"sap.ui.core.Control",group:"Data",defaultValue:null},"chartPopOver":{type:"sap.ui.core.Control",group:"Data",defaultValue:null},"popoverSubHeader":{type:"sap.ui.core.Control",group:"Appearance",defaultValue:null},"popoverFooter":{type:"sap.ui.core.Control",group:"Appearance",defaultValue:null},"advancedChartSettings":{type:"object",group:"Appearance",defaultValue:null},"stackedChartWidthEnhancer":{type:"boolean",group:"Appearance",defaultValue:false},"noData":{type:"sap.ui.core.Control",group:"Appearance",defaultValue:null}},aggregations:{"internalContent":{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"},"chartPopover":{type:"sap.ui.core.Control",multiple:false,visibility:"hidden"}},events:{"selectDataPoint":{},"popoverBeforeOpen":{},"popoverAfterOpen":{}}}});sap.ca.ui.charts.Chart.M_EVENTS={'selectDataPoint':'selectDataPoint','popoverBeforeOpen':'popoverBeforeOpen','popoverAfterOpen':'popoverAfterOpen'};
/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.require("sap.m.ScrollContainer");jQuery.sap.require("sap.ca.ui.charts.ChartType");jQuery.sap.require("sap.ca.ui.charts.ChartSelectionMode");jQuery.sap.require("sap.ca.ui.charts.ChartSemanticColor");jQuery.sap.require("sap.ca.ui.charts.ChartColor");jQuery.sap.require("sap.ca.ui.charts.ClusterList");jQuery.sap.require("sap.ca.ui.charts.ChartFormatter");sap.ui.getCore().loadLibrary("sap.viz");
sap.ca.ui.charts.Chart.prototype.init=function(){this._oScrollContainer=new sap.m.ScrollContainer(this._createId("scroll"),{width:"100%",height:"100%"});this.setAggregation("internalContent",this._oScrollContainer);this._oSelectedDataList=new sap.ca.ui.charts.ClusterList(this._createId("clusterList"));this._createPopover();this.oChartFormatter=sap.ca.ui.charts.ChartFormatter.getInstance();this._oMinimumShapeSizes={desktop:24,mobile:48,desktop_px:jQuery.proxy(function(){return this._oMinimumShapeSizes.desktop+"px"},this),mobile_px:jQuery.proxy(function(){return this._oMinimumShapeSizes.mobile+"px"},this)}};
sap.ca.ui.charts.Chart.prototype._createPopover=function(){var c=new sap.m.Bar(this._createId("popoverHeaderBar"),{contentMiddle:[new sap.m.Label(this._createId("--popoverLabel"),{text:sap.ca.ui.utils.resourcebundle.getText("ChartPopover.title")})],contentRight:(jQuery.device.is.phone)?[]:[new sap.m.Button(this._createId("--popoverCloseButton"),{icon:"sap-icon://"+sap.ui.core.theming.Parameters.get("sapCaUiChartPopoverCloseIcon"),width:sap.ui.core.theming.Parameters.get("sapCaUiChartPopoverCloseIconSize"),press:jQuery.proxy(this._closePopover,this)})]});this._oChartPopover=new sap.m.ResponsivePopover(this._createId("popover"),{modal:false,enableScrolling:true,verticalScrolling:true,horizontalScrolling:false,placement:sap.m.PlacementType.Auto,contentWidth:"18rem",customHeader:c,content:[this._oSelectedDataList.getControl()]});this._oChartPopover.addStyleClass('sapCaUiChartPopOver');this.setAggregation("chartPopover",this._oChartPopover);if(!jQuery.device.is.phone){this._oChartPopover._oControl.oPopup.setAutoClose(false)}var s=sap.ui.getCore().getStaticAreaRef();s=sap.ui.getCore().getUIArea(s);s.addContent(this._oChartPopover,true);this._oChartPopover._bAppendedToUIArea=true;this._oChartPopover.attachAfterOpen(null,jQuery.proxy(this._afterOpenPopover,this));if(!jQuery.device.is.phone){jQuery(document).bind(sap.ui.Device.support.touch?"touchstart":"mousedown",jQuery.proxy(this._mouseDownHandler,this))}if(sap.ui.Device.browser.internet_explorer){this._oChartPopover._oControl.oPopup.restoreFocus=false}this.bIsRTL=sap.ui.getCore().getConfiguration().getRTL()&&!jQuery.device.is.phone;if(this.bIsRTL){this._oChartPopover.attachBeforeClose(null,jQuery.proxy(this._beforeClosePopover,this));var a=jQuery.proxy(this._adjustPopoverPosition,this);var A=jQuery.proxy(this._oChartPopover._oControl.oPopup._applyPosition,this._oChartPopover._oControl.oPopup);this._oChartPopover._oControl.oPopup._applyPosition=function(p,f){A(p,f);a(p.of)}}};
sap.ca.ui.charts.Chart.prototype._mouseDownHandler=function(e){var t=e.target;if(!this._isInChartArea(t)){this._closePopover()}};
sap.ca.ui.charts.Chart.prototype._isInChartArea=function(t){if(!t||!t.getAttribute){return false}var c=t.getAttribute('class');if(c&&(c.indexOf('sapCaUiChartPopOver')>=0||c.indexOf('sapCaUiCLI')>=0||c.indexOf('v-datapoint')>=0||c.indexOf('v-morphable')>=0||c.indexOf('v-datashape')>=0||c.indexOf('v-datashapesgroup')>=0||c.indexOf('v-bound')>=0||c.indexOf('v-gridline')>=0||c.indexOf('v-datalabel')>=0||c.indexOf('v-lines')>=0||c.indexOf('v-label')>=0||c.indexOf('v-labelarea')>=0||c.indexOf('v-hovershadow')>=0||c.indexOf('v-m-root')>=0||c.indexOf('v-m-background')>=0||c.indexOf('v-m-yAxis')>=0||c.indexOf('v-m-xAxis')>=0||c.indexOf('v-m-title')>=0||c.indexOf('v-m-main')>=0||c.indexOf('v-m-plot')>=0||c.indexOf('v-m-legend')>=0||c.indexOf('v-legend-item')>=0||c.indexOf('v-body')>=0||c.indexOf('v-subtitle')>=0||c.indexOf('v-title')>=0||c.indexOf('v-incised-gridline')>=0||c.indexOf('v-fixed-valueaxisline')>=0||c.indexOf('v-multiValue')>=0||c.indexOf('v-background-body')>=0||c.indexOf('v-background-border')>=0||c.indexOf('v-axis')>=0||c.indexOf('v-axis-item')>=0||c.indexOf('v-subaxis')>=0||c.indexOf('v-valueaxis')>=0||c.indexOf('v-valueaxisline')>=0||c.indexOf('v-categoryaxisline')>=0||c.indexOf('viz-axis')>=0||c.indexOf('viz-axis-body')>=0||c.indexOf('viz-axis-label')>=0||c.indexOf('viz-legend')>=0)){return true}else if(t.parentElement){return this._isInChartArea(t.parentElement)}else if(t.parentNode){return this._isInChartArea(t.parentNode)}return false};
sap.ca.ui.charts.Chart.prototype._closePopover=function(){if(this._oChartPopover){if(this._oChartPopover.isOpen()){this._oChartPopover.close()}}};
sap.ca.ui.charts.Chart.prototype._beforeClosePopover=function(){if(this.bIsRTL){this._deregisterContentResizeHandler();this._enableConfigurationRTL();this.sPopoverPlacement=null}};
sap.ca.ui.charts.Chart.prototype._afterOpenPopover=function(){this.firePopoverAfterOpen();if(this.bIsRTL){this._registerPopupContentResizeHandler()}};
sap.ca.ui.charts.Chart.prototype.exit=function(){this._deregisterEvent();this._closePopover();if(this._oSelectedDataList){this._oSelectedDataList.destroy();this._oSelectedDataList=null}if(this._oChartPopover){if(this.bIsRTL){this._deregisterContentResizeHandler();this._enableConfigurationRTL();this.sPopoverPlacement=null}this._oChartPopover.destroy();this._oChartPopover=null}};
sap.ca.ui.charts.Chart.prototype._deregisterEvent=function(){if(jQuery.device.is.desktop){jQuery(window).unbind("resize",jQuery.proxy(this._onResize,this))}else{sap.ui.Device.orientation.detachHandler(this._onOrientationChange,this);sap.ui.Device.resize.detachHandler(this._onResize,this)}};
sap.ca.ui.charts.Chart.prototype._createId=function(i){return this.getId()+"-"+i};
sap.ca.ui.charts.Chart.prototype._findInCss=function(r){var m=[];if(!this._sapCaStylesheet){var s=null;jQuery.each(document.styleSheets,function(i,S){if((!!S.ownerNode&&/sap.ca.ui/.test(S.ownerNode.id))||(!!S.owningElement&&/sap.ca.ui/.test(S.owningElement.id))){s=S}});if(s==null){jQuery.each(document.styleSheets,function(i,S){if(S.rules&&S.rules.length>0){jQuery.each(S.rules,function(I,R){if(r.test(R.selectorText)){s=S;return false}})}else if(S.cssRules&&S.cssRules.length>0){jQuery.each(S.cssRules,function(I,R){if(r.test(R.selectorText)){s=S;return false}})}if(s){return false}})}this._sapCaStylesheet=s}if(this._sapCaStylesheet){if(this._sapCaStylesheet.rules&&this._sapCaStylesheet.rules.length>0){jQuery.each(this._sapCaStylesheet.rules,function(i,R){if(r.test(R.selectorText)){m.push(R)}})}else if(this._sapCaStylesheet.cssRules&&this._sapCaStylesheet.cssRules.length>0){jQuery.each(this._sapCaStylesheet.cssRules,function(i,R){if(r.test(R.selectorText)){m.push(R)}})}}return m};
sap.ca.ui.charts.Chart.prototype._getColorPalette=function(){var c=[];var i;for(i=1;i<12;i++){c.push(sap.ui.core.theming.Parameters.get("sapUiChart"+i))}return c};
sap.ca.ui.charts.Chart.prototype._getSemanticPalette=function(){var s=[];s[sap.ca.ui.charts.ChartSemanticColor.NeutralDark]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Neutral-Dark");s[sap.ca.ui.charts.ChartSemanticColor.Neutral]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Neutral");s[sap.ca.ui.charts.ChartSemanticColor.NeutralLight]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Neutral-Light");s[sap.ca.ui.charts.ChartSemanticColor.GoodDark]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Good-Dark");s[sap.ca.ui.charts.ChartSemanticColor.Good]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Good");s[sap.ca.ui.charts.ChartSemanticColor.GoodLight]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Good-Light");s[sap.ca.ui.charts.ChartSemanticColor.CriticalDark]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Critical-Dark");s[sap.ca.ui.charts.ChartSemanticColor.Critical]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Critical");s[sap.ca.ui.charts.ChartSemanticColor.CriticalLight]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Critical-Light");s[sap.ca.ui.charts.ChartSemanticColor.BadDark]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Bad-Dark");s[sap.ca.ui.charts.ChartSemanticColor.Bad]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Bad");s[sap.ca.ui.charts.ChartSemanticColor.BadLight]=sap.ui.core.theming.Parameters.get("sapCaUiChartSemanticColor-Bad-Light");return s};
sap.ca.ui.charts.Chart.prototype._getSecondaryColorPalette=function(c){var d=this.getDataset();var s=[];if(d&&d.getVIZDataset()){var a=d.getVIZDataset().getMeasureValuesGroupByIdx(0).getMeasureValues().length;jQuery.extend(s,c);s.splice(0,a)}return s};
sap.ca.ui.charts.Chart.prototype._getDataLabelCss=function(){var d=".v-datalabel {"+"font-family:"+sap.ui.core.theming.Parameters.get("sapCaUiChartFontFamily")+";"+"font-size:"+sap.ui.core.theming.Parameters.get("sapCaUiChartFontSize")+";"+"font-weight:"+sap.ui.core.theming.Parameters.get("sapCaUiChartFontWeight")+";"+"text-shadow:"+sap.ui.core.theming.Parameters.get("sapCaUiChartDataLabelShadow")+";"+"fill:"+sap.ui.core.theming.Parameters.get("sapCaUiChartFontColor")+";"+"}";return d};
sap.ca.ui.charts.Chart.prototype._getDataPointCss=function(){if(!this._sDataPointRule){var d="";var a=this._findInCss(/.sapCaUiChart .v-datapoint/);if(a.length>0){var r=a[0];d=".v-datapoint {";var i;for(i=0;i<r.style.length;i++){d+=r.style[i]+": "+r.style[r.style[i]]+"; "}d+="}"}this._sDataPointRule=d}return this._sDataPointRule};
sap.ca.ui.charts.Chart.prototype._getEMSize=function(i){if(!this._emSize){this._emSize=parseFloat(jQuery("body").css("font-size"))}var p;if(jQuery.sap.endsWith(i,"em")||jQuery.sap.endsWith(i,"rem")){p=this._emSize*parseFloat(i)}else{p=parseFloat(i)}return p};
sap.ca.ui.charts.Chart.prototype._getMarkerSize=function(){if(!this._iMarkerSize){var m=0;var a=this._findInCss(/.sapCaUiChartMarkerSize/);if(a.length>0){var r=a[0];var f=r.style['font-size'];if(f==null){f=r.style['fontSize']}m=parseInt(this._getEMSize(f))}this._iMarkerSize=m}return this._iMarkerSize};
sap.ca.ui.charts.Chart.prototype._getAlignedScale=function(){var s=0;var a;var b=null;if(this.getDataset()){var c=this.getDataset().getVIZDataset();var m=[];var j;for(j=0;j<c.getMeasureValuesGroupByIdx(1).getMeasureValues()[0]._values[0].length;j++){m.push(parseInt(c.getMeasureValuesGroupByIdx(1).getMeasureValues()[0]._values[0][j])+parseInt(c.getMeasureValuesGroupByIdx(1).getMeasureValues()[1]._values[0][j]))}var d=Math.max.apply(Math,m);var e=Math.min.apply(Math,m);var i;for(i=0;i<c.getMeasureValuesGroupCount();i++){var t=Math.max(Math.max.apply(Math,c.getMeasureValuesGroupByIdx(i).getMeasureValues()[0]._values[0]),d);var f=Math.min(Math.min.apply(Math,c.getMeasureValuesGroupByIdx(i).getMeasureValues()[0]._values[0]),e);if(!a){a=t}s=(s<f)?s:f;a=(a>t)?a:t}a=(a>0)?parseInt(1.05*a):parseInt(0.95*a);b={fixedRange:true,minValue:s,maxValue:a}}return b};
sap.ca.ui.charts.Chart.prototype._getMergedChartSettings=function(){var c=this._getChartSettings();var p={};if(this._oInternalVizChart){p=this._oInternalVizChart._getOptions()}return jQuery.extend(true,p,c,this.getAdvancedChartSettings())};
sap.ca.ui.charts.Chart.prototype._getChartSettings=function(){var c=this._getColorPalette().concat();var p;if(this.getDataset()){var s=this._getSemanticPalette();var i;this.semanticColorFormatterAllowed=false;var a=this.getChartSemanticColorFormatter();if(this._vizChartType.name!=sap.ca.ui.charts.ChartType.Bubble){var m=this.getDataset().getMeasures();var b={};var d={};var n=false;for(i=0;i<m.length;i++){var f=m[i].data("fillColor");if(f!=null){if(s.hasOwnProperty(f)){b[i]=s[f]}else{d[i]=sap.ui.core.theming.Parameters.get(f)}}else{n=true;break}}if(!n){if(!jQuery.isEmptyObject(b)&&jQuery.isEmptyObject(d)){for(p in b){c.splice(p,0,b[p])}if(a!=null&&a instanceof Function){this.semanticColorFormatterAllowed=true}}if(!jQuery.isEmptyObject(d)&&jQuery.isEmptyObject(b)){for(p in d){c.splice(p,0,d[p])}if(a!=null&&a instanceof Function){jQuery.sap.log.error("chartSemanticColorFormatter couldn't be used in the chart [chart ID:"+this.getId()+"]  because "+"all measures aren't associated with a semantic chart color.")}}if(!jQuery.isEmptyObject(d)&&!jQuery.isEmptyObject(b)){jQuery.sap.log.error("Chart colors and semantic chart colors couldn't be mixed.")}}else{if(!jQuery.isEmptyObject(d)||!jQuery.isEmptyObject(b)){jQuery.sap.log.error("All measures must be associated with a chart color or a semantic chart color.")}if(jQuery.isEmptyObject(b)&&jQuery.isEmptyObject(d)&&a!=null&&a instanceof Function){jQuery.sap.log.error("chartSemanticColorFormatter couldn't be used in the chart [chart ID:"+this.getId()+"]  because "+"all measures aren't associated with a semantic chart color.")}}}else{var e=this.getDataset().getDimensions();var g=this.getDataset().getVIZDataset()._dataSet.analysisAxis[0].data;var b={};var d={};var h=false;for(i=0;i<e.length;i++){var l=e[i].data("fillColors");if(l!=null){var j;for(j=0;j<g.length;j++){if(g[j].name==e[i].getName()){var v=g[j].values;var u=[];jQuery.each(v,function(i,t){if(jQuery.inArray(t,u)===-1){u.push(t)}});var k;for(k=0;k<u.length;k++){if(l.hasOwnProperty(u[k])){var f=l[u[k]];if(s.hasOwnProperty(f)){b[k]=s[f];var o=jQuery.inArray(b[k],c);if(o!=-1){c.splice(o,1)}}else{d[k]=sap.ui.core.theming.Parameters.get(f);var o=jQuery.inArray(d[k],c);if(o!=-1){c.splice(o,1)}}}else{h=true;break}}}}}}if(!h){if(!jQuery.isEmptyObject(b)&&jQuery.isEmptyObject(d)){for(p in b){c.splice(p,0,b[p])}if(a!=null&&a instanceof Function){this.semanticColorFormatterAllowed=true}}if(!jQuery.isEmptyObject(d)&&jQuery.isEmptyObject(b)){for(p in d){c.splice(p,0,d[p])}if(a!=null&&a instanceof Function){jQuery.sap.log.error("chartSemanticColorFormatter couldn't be used in the chart [chart ID:"+this.getId()+"]  because "+"all values in a dimension aren't associated with a semantic chart color.")}}if(!jQuery.isEmptyObject(b)&&!jQuery.isEmptyObject(d)){jQuery.sap.log.error("Chart colors and semantic chart colors couldn't be mixed.")}}else{if(!jQuery.isEmptyObject(b)||!jQuery.isEmptyObject(d)){jQuery.sap.log.error("All values in a dimension must be associated with a chart color or a semantic chart color.")}}if(jQuery.isEmptyObject(b)&&jQuery.isEmptyObject(d)&&a!=null&&a instanceof Function){jQuery.sap.log.error("chartSemanticColorFormatter couldn't be used in the chart [chart ID:"+this.getId()+"]  because "+"all values in a dimension aren't associated with a semantic chart color.")}}}var q={width:"100%",height:"100%",general:{layout:{padding:5}},plotArea:{colorPalette:c,marker:{visible:true,size:this._getMarkerSize()},axisTooltip:{formatString:this.getProperty("plotAreaAxisTooltipFormatter")},animation:{dataLoading:true,dataUpdating:true,resizing:false}},title:{visible:this.getProperty("title")!==undefined&&this.getProperty("title")!==null&&this.getProperty("title")!=="",text:this.getProperty("title")},dataLabel:{visible:this.getProperty("showDataLabel"),position:this._vizChartType.dataLabelPosition,formatString:this.getProperty("dataLabelFormatter")},legend:{visible:this.getShowLegend(),isScrollable:true},tooltip:{visible:this.getShowTooltip(),formatString:this.getProperty("tooltipFormatter")},hoverline:{visible:this._vizChartType.showHoverLine},interaction:{pan:{enable:false},supportLassoEvent:false,selectability:{mode:this.getSelectionMode().toLowerCase()}},background:{visible:true,border:{left:{visible:false},right:{visible:false},bottom:{visible:true},top:{visible:true}}},xAxis:{label:{formatString:this.getProperty("xAxisLabelFormatter")}},xAxis2:{label:{formatString:this.getProperty("xAxis2LabelFormatter")},visible:this.getProperty("secondAxisVisible")},yAxis:{label:{formatString:this.getProperty("yAxisLabelFormatter")}},yAxis2:{label:{formatString:this.getProperty("yAxis2LabelFormatter")},visible:this.getProperty("secondAxisVisible")}};if(this._vizChartType.dualAxis){q.plotArea.primaryValuesColorPalette=c;q.plotArea.secondaryValuesColorPalette=this._getSecondaryColorPalette(c);if(!this.getProperty("secondAxisVisible")&&this._vizChartType.alignScales){var r=this._getAlignedScale();if(this._vizChartType.scroll.horizontal){q.yAxis2.scale=r;q.yAxis.scale=r}else{q.xAxis2.scale=r;q.xAxis.scale=r}}}return q};
sap.ca.ui.charts.Chart.prototype.applySettings=function(s,S){sap.ui.core.Control.prototype.applySettings.apply(this,arguments);this._initChart()};
sap.ca.ui.charts.Chart.prototype._initChart=function(){this._vizChartType=sap.ca.ui.charts.ChartType.getChartProperties(this.getChartType());var c=this._getMergedChartSettings();if(this._vizChartType!=null){if(this.getLabel()==""&&!(this.mBindingInfos["label"])){this.setLabel(this._vizChartType.displayLabel)}if(this.getIcon()==""){this.setProperty("icon",this._vizChartType.icon)}if(this._oInternalVizChart!=null){this._oInternalVizChart.destroy()}c.tooltip=null;this._oInternalVizChart=new sap.viz.ui5[this._vizChartType.name](this._createId("vizChart"),c);this._oInternalVizChart.addDelegate({onAfterRendering:function(){this._onResizeInt()}},true,this);this._oInternalVizChart.attachBeforeCreateViz(function(e){var u=e.getParameter("usrOptions");if(this._vizChartType.vizType){u.type=this._vizChartType.vizType}u.css=this._getDataLabelCss()+this._getDataPointCss();u.options=this._getMergedChartSettings()},this);this._oScrollContainer.addContent(this._oInternalVizChart);this._oScrollContainer.setVertical(this._vizChartType.scroll.vertical);this._oScrollContainer.setHorizontal(this._vizChartType.scroll.horizontal);this._oInternalVizChart.attachInitialized(this.onChartInitialized,this);this._oInternalVizChart.attachSelectData(this.onSelectData,this);this._oInternalVizChart.attachDeselectData(this.onDeselectData,this);if(jQuery.sap.touchEventMode=="ON"&&jQuery.device.is.tablet){this._oInternalVizChart.attachBrowserEvent("touchmove",jQuery.proxy(this._closePopover,this))}this.setMinShapeSize()}else{jQuery.sap.log.error("Cannot instantiate the Chart control, "+this.getVizType()+" is not a recognized type")}};
sap.ca.ui.charts.Chart.prototype.updateBindings=function(u,m){sap.ui.core.Control.prototype.updateBindings.apply(this,arguments)};
sap.ca.ui.charts.Chart.prototype.invalidate=function(o,i){if(i){if(this._sInvalidateDelay){jQuery.sap.clearDelayedCall(this._sInvalidateDelay)}this._sInvalidateDelay=jQuery.sap.delayedCall(200,this,sap.ui.core.Control.prototype.invalidate,arguments)}else{sap.ui.core.Control.prototype.invalidate.apply(this,arguments)}};
sap.ca.ui.charts.Chart.prototype.setChartType=function(t){this.setProperty("chartType",t);this.setProperty("icon","");this._vizChartType=sap.ca.ui.charts.ChartType.getChartProperties(this.getChartType());this._initChart();return this};
sap.ca.ui.charts.Chart.prototype.setTitle=function(t){this.setProperty("title",t);return this};
sap.ca.ui.charts.Chart.prototype.setInternalVizChart=function(i){jQuery.sap.log.warning("InternalVizChart cannot be set from outside a sap.ca.ui.chart.Chart class.");return this};
sap.ca.ui.charts.Chart.prototype.setChartPopOver=function(c){jQuery.sap.log.warning("ChartPopOver cannot be set from outside a sap.ca.ui.chart.Chart class.");return this};
sap.ca.ui.charts.Chart.prototype.setDataset=function(d){this._oInternalVizChart.setDataset(d);this.setProperty("dataset",d);return this};
sap.ca.ui.charts.Chart.prototype.getDataset=function(){var d=null;if(this._oInternalVizChart){d=this._oInternalVizChart.getDataset()}return d};
sap.ca.ui.charts.Chart.prototype.getInternalVizChart=function(){return this._oInternalVizChart};
sap.ca.ui.charts.Chart.prototype.getChartPopOver=function(){return this._oChartPopover};
sap.ca.ui.charts.Chart.prototype.setModel=function(m){if(this._oSelectedDataList){this._oSelectedDataList.reset()}sap.ui.core.Control.prototype.setModel.apply(this,arguments);return this};
sap.ca.ui.charts.Chart.prototype.setHeight=function(h){this.setProperty("height",h);return this};
sap.ca.ui.charts.Chart.prototype.setWidth=function(w){this.setProperty("width",w);return this};
sap.ca.ui.charts.Chart.prototype.setShowLegend=function(s){this.setProperty("showLegend",s);if(this._oInternalVizChart){this._oInternalVizChart.getLegend().setVisible(s)}return this};
sap.ca.ui.charts.Chart.prototype.setShowTooltip=function(s){this.setProperty("showTooltip",s);if(this._oInternalVizChart){var t=this._oInternalVizChart.getToolTip();if(t){if(t.setVisible){t.setVisible(s)}if(t.setEnabled){t.setEnabled(s)}}else{jQuery.sap.log.error("Aggregation toolTip couldn't be found in viz chart.")}}return this};
sap.ca.ui.charts.Chart.prototype.setSelectionMode=function(s){this.setProperty("selectionMode",s);if(this._oInternalVizChart){this._oInternalVizChart.getInteraction().getSelectability().setMode(s.toLowerCase());this._oInternalVizChart.selection([],{clearSelection:true})}this._oSelectedDataList.reset();this._closePopover();return this};
sap.ca.ui.charts.Chart.prototype._setCursorStyle=function(){var $=this.$();var n=(!!this.getSelectionMode())?this.getSelectionMode():"";if(n.toLowerCase()===sap.ca.ui.charts.ChartSelectionMode.None.toLowerCase()){$.addClass('sapCaUiChartSelectionNoneCursor')}else{$.removeClass('sapCaUiChartSelectionNoneCursor')}};
sap.ca.ui.charts.Chart.prototype.getSelectionMode=function(){if(this._oInternalVizChart){return this._oInternalVizChart.getInteraction().getSelectability().getMode()}jQuery.sap.log.debug("getSelectionMode called without an internal chart");return this.getProperty("selectionMode")};
sap.ca.ui.charts.Chart.prototype.setXAxisLabelFormatter=function(f){var a=this.oChartFormatter.addFormatter(this._oInternalVizChart,"xAxisLabelFormatter",f);this.setProperty("xAxisLabelFormatter",a);return this};
sap.ca.ui.charts.Chart.prototype.setXAxis2LabelFormatter=function(f){var a=this.oChartFormatter.addFormatter(this._oInternalVizChart,"xAxis2LabelFormatter",f);this.setProperty("xAxis2LabelFormatter",a);return this};
sap.ca.ui.charts.Chart.prototype.setYAxisLabelFormatter=function(f){var a=this.oChartFormatter.addFormatter(this._oInternalVizChart,"yAxisLabelFormatter",f);this.setProperty("yAxisLabelFormatter",a);return this};
sap.ca.ui.charts.Chart.prototype.setYAxis2LabelFormatter=function(f){var a=this.oChartFormatter.addFormatter(this._oInternalVizChart,"yAxis2LabelFormatter",f);this.setProperty("yAxis2LabelFormatter",a);return this};
sap.ca.ui.charts.Chart.prototype.setDataLabelFormatter=function(f){var a;var b=[[]];if(Array.isArray(f)){var i;var j;for(i=0;i<f.length;i++){if(Array.isArray(f[i])){if(i>0){b.push([])}for(j=0;j<f[i].length;j++){a=this.oChartFormatter.addFormatter(this._oInternalVizChart,"dataLabelFormatter"+i+"-"+j,f[i][j]);b[i][j]=a}}else{jQuery.sap.log.error("dataLabelFormatter must be an array of arrays");return this}}}else{jQuery.sap.log.error("dataLabelFormatter must be an array of arrays");return this}this.setProperty("dataLabelFormatter",b);return this};
sap.ca.ui.charts.Chart.prototype.setPlotAreaAxisTooltipFormatter=function(f){var a;var b=[];if(Array.isArray(f)){var i;for(i=0;i<f.length;i++){a=this.oChartFormatter.addFormatter(this._oInternalVizChart,"plotAreaAxisTooltipFormatter"+i,f[i]);b[i]=a}}else{jQuery.sap.log.error("plotAreaAxisTooltipFormatter must be an array");return this}this.setProperty("plotAreaAxisTooltipFormatter",b);return this};
sap.ca.ui.charts.Chart.prototype.setTooltipFormatter=function(f){var a;var b=[[]];if(Array.isArray(f)){var i,j;for(i=0;i<f.length;i++){if(Array.isArray(f[i])){if(i>0){b.push([])}for(j=0;j<f[i].length;j++){a=this.oChartFormatter.addFormatter(this._oInternalVizChart,"tooltipFormatter"+i+"-"+j,f[i][j]);b[i][j]=a}}else{jQuery.sap.log.error("tooltipFormatter must be an array of arrays");return this}}}else{jQuery.sap.log.error("tooltipFormatter must be an array of arrays");return this}this.setProperty("tooltipFormatter",b);return this};
sap.ca.ui.charts.Chart.prototype.setPopoverFormatter=function(f){var a;var b=[[]];var i,j;if(Array.isArray(f)){for(i=0;i<f.length;i++){if(Array.isArray(f[i])){if(i>0){b.push([])}for(j=0;j<f[i].length;j++){a=this.oChartFormatter.addFormatter(this._oInternalVizChart,"popoverFormatter"+i+"-"+j,f[i][j]);b[i][j]=a}}else{jQuery.sap.log.error("popoverFormatter must be an array of arrays");return this}}}else{jQuery.sap.log.error("popoverFormatter must be an array of arrays");return this}this.setProperty("popoverFormatter",b);return this};
sap.ca.ui.charts.Chart.prototype.setPopoverGroupFormatter=function(f){var a=this.oChartFormatter.addFormatter(this._oInternalVizChart,"popoverGroupFormatter",f);this.setProperty("popoverGroupFormatter",a);return this};
sap.ca.ui.charts.Chart.prototype.setAdvancedChartSettings=function(s){this.setProperty("advancedChartSettings",s);return this};
sap.ca.ui.charts.Chart.prototype.setMinShapeSize=function(m){if(jQuery.device.is.desktop){if(typeof m!=="undefined"){jQuery.sap.log.warning("MinShapeSize must be 24px for desktop. Forcing to 24px.")}m=this._oMinimumShapeSizes.desktop_px()}else{if(typeof m!=="undefined"){jQuery.sap.log.warning("MinShapeSize must be 48px to be clickable on mobile. Forcing to 48px.")}m=this._oMinimumShapeSizes.mobile_px()}this.setProperty("minShapeSize",m);return this};
sap.ca.ui.charts.Chart.prototype.onChartInitialized=function(e){this._setCursorStyle();var s=this.getChartSemanticColorFormatter();if(s!=null&&s instanceof Function&&this.semanticColorFormatterAllowed){var c=d3.select(this._oInternalVizChart.getDomRef()).select('.v-m-root');var a=this._getSemanticPalette();c.selectAll('g.v-datashape').selectAll('rect').attr('fill',function(d){var b=s(d);var f;if(d.hasOwnProperty('fillColor')){f=d.fillColor}else if(d.hasOwnProperty('colorValue')){f=d.colorValue}else{jQuery.sap.log.error("property 'fillColor' or 'colorValue' is missing in the datapoint.")}if(b&&a.hasOwnProperty(b)){f=a[b]}return f});c.selectAll('g.v-datashape').selectAll('path').attr('fill',function(d){var b=s(d);var f;if(d.hasOwnProperty('fillColor')){f=d.fillColor}else if(d.hasOwnProperty('colorValue')){f=d.colorValue}else{jQuery.sap.log.error("property 'fillColor' or 'colorValue' is missing in the datapoint.")}if(b&&a.hasOwnProperty(b)){f=a[b]}return f})}};
sap.ca.ui.charts.Chart.prototype._showDetailInPopover=function(){if(!this.oSelectedData){return}var d=this.oSelectedData;if(this.getSelectionMode()===sap.ca.ui.charts.ChartSelectionMode.Single.toLowerCase()){this._oChartPopover.detachAfterClose(jQuery.proxy(this._showDetailInPopover,this),this);this._oSelectedDataList.reset()}var t=d[d.length-1].target;var v=this._oInternalVizChart.getDataset().getVIZDataset();var m=v._measureValuesGroup;var p,q;for(p=0;p<d.length;p++){for(q=0;q<d[p].data.length;q++){if(!d[p].data[q]||!d[p].data[q].ctx||!jQuery.isNumeric(d[p].data[q].val)){continue}var c=d[p].data[q].ctx;var C=d[p].target.attributes.fill.value;var V=d[p].data[q].val;var a=v._analysisAxis[0]._dimensionLabels;var b=m[c.path.mg].getMeasureValues();var M=b[c.path.mi]._uId;var A="";var g=[];if(c.type==='Measure'){var e=c.path;var k=e.dii_a1.toString();k+=e.dii_a2.toString();k+=e.mg.toString();k+=e.mi.toString();var f=this;var h;if(this.getProperty("popoverGroupFormatter")){h=this.getProperty("popoverGroupFormatter")}jQuery.each(a,jQuery.proxy(function(i,u){A=u._values[c.path.dii_a1];g.push(A);if(f._oSelectedDataList.getGroupIndexFor(g)===-1){if(h&&h.length>0){A=this.oChartFormatter.format(A.toString(),h)}f._oSelectedDataList.addGroup({key:g,title:A})}},this));var j="";if(!this.getProperty("popoverFormatter")||!Array.isArray(this.getProperty("popoverFormatter"))||this.getProperty("popoverFormatter").length<c.path.mg||!this.getProperty("popoverFormatter")[c.path.mg]||!Array.isArray(this.getProperty("popoverFormatter")[c.path.mg])||this.getProperty("popoverFormatter")[c.path.mg].length==0){j=sap.ca.ui.charts.DefaultFormatterFunction.STANDARDNUMBER}else{if(this.getProperty("popoverFormatter")[c.path.mg].length<c.path.mi){j=this.getProperty("popoverFormatter")[c.path.mg][0]}else{j=this.getProperty("popoverFormatter")[c.path.mg][c.path.mi]}}if(this._oSelectedDataList.getItemIndexFor(g,k)===-1){this._oSelectedDataList.addItemTo(g,[{key:k,color:C,label:M,value:this.oChartFormatter.format(V.toString(),j)}])}}}}var s=this._oInternalVizChart.selection();var o=jQuery.extend(true,{},d);this.firePopoverBeforeOpen({isOpen:this._oChartPopover.isOpen(),openBy:t,selection:s,data:o});if(!this._oChartPopover.isOpen()){var l=0;var n=0;if(t.width!=null){l=Math.floor(t.width.baseVal.value);n=Math.floor((t.height.baseVal.value/2))}if(this._vizChartType.name==sap.ca.ui.charts.ChartType.Bubble){if(t&&t.getBoundingClientRect()){var B=t.getBoundingClientRect().width;var r=t.getBoundingClientRect().height;if(B){l=Math.floor(B/2);n=Math.floor(r/2)}}}this._oChartPopover.setOffsetX(l);this._oChartPopover.setOffsetY(n);if(!jQuery.device.is.phone){this._oChartPopover._oControl.$().css("max-height",this._oInternalVizChart.getHeight())}if(this.bIsRTL){this.sPopoverPlacement=null;this._disableConfigurationRTL()}this._oChartPopover.openBy(t)}else if(!jQuery.device.is.phone){this._invalidatePopover()}this.oSelectedData=undefined};
sap.ca.ui.charts.Chart.prototype._adjustPopoverPosition=function(t){var $=this._oChartPopover._oControl.$('arrow');if($){var c=$.attr('class');if(c){if(!this.sPopoverPlacement){if(c.indexOf('sapMPopoverArrLeft')>=0){this.sPopoverPlacement=sap.m.PlacementType.Right}if(c.indexOf('sapMPopoverArrRight')>=0){this.sPopoverPlacement=sap.m.PlacementType.Left}}$.removeClass("sapMPopoverArrRight sapMPopoverArrLeft");if(this.sPopoverPlacement==sap.m.PlacementType.Right){$.addClass("sapMPopoverArrRight")}if(this.sPopoverPlacement==sap.m.PlacementType.Left){$.addClass("sapMPopoverArrLeft")}}}};
sap.ca.ui.charts.Chart.prototype._registerPopupContentResizeHandler=function(){if(!this._sResizeListenerId){var p=this._oChartPopover._oControl.getDomRef("scroll");if(p){this._sResizeListenerId=sap.ui.core.ResizeHandler.register(p,this._disableConfigurationRTL)}}};
sap.ca.ui.charts.Chart.prototype._deregisterContentResizeHandler=function(){if(this._sResizeListenerId){sap.ui.core.ResizeHandler.deregister(this._sResizeListenerId);this._sResizeListenerId=null}};
sap.ca.ui.charts.Chart.prototype._disableConfigurationRTL=function(){this.fn_getRTL=jQuery.proxy(sap.ui.getCore().getConfiguration().getRTL);sap.ui.getCore().getConfiguration().getRTL=function(){return false}};
sap.ca.ui.charts.Chart.prototype._enableConfigurationRTL=function(){if(typeof(this.fn_getRTL)=="function"){sap.ui.getCore().getConfiguration().getRTL=this.fn_getRTL;this.fn_getRTL=null}};
sap.ca.ui.charts.Chart.prototype._invalidatePopover=function(){var p=this._oChartPopover._oControl;sap.m.PopoverRenderer.rerenderContentOnly(p);var $=p.$();$.addClass('sapCaUiChartPopOver');var a=jQuery.sap.byId(p.getId()+"-cont");a.css("overflow-y","auto")};
sap.ca.ui.charts.Chart.prototype.onSelectData=function(e){var s=this._oInternalVizChart.selection();this.oSelectedData=e.getParameter("data");var a=null;if(s.length>0){a=s[s.length-1];if(this.getSelectionMode()===sap.ca.ui.charts.ChartSelectionMode.Single.toLowerCase()){s=[a];if(this.getShowPopover()){this._oChartPopover.attachAfterClose(null,jQuery.proxy(this._showDetailInPopover,this),this);if(this._oChartPopover.isOpen()){this._oChartPopover.close()}else{this._showDetailInPopover()}}}else{if(this.getShowPopover()){this._showDetailInPopover()}}}this.fireSelectDataPoint({popover:this._oChartPopover,srcEvent:e,selection:s,selectedItem:a})};
sap.ca.ui.charts.Chart.prototype.onDeselectData=function(e){var s=this._oInternalVizChart.selection();var p,q;if(this.getShowPopover()){if(s.length==0){this._oSelectedDataList.reset();this._closePopover()}else{if(this.getSelectionMode()!==sap.ca.ui.charts.ChartSelectionMode.Single.toLowerCase()){var d=e.getParameter("data");for(p=0;p<d.length;p++){for(q=0;q<d[p].data.length;q++){if(!d[p].data[q]||!d[p].data[q].ctx||!jQuery.isNumeric(d[p].data[q].val)){continue}var c=d[p].data[q].ctx;if(c.type=='Measure'){var a=c.path;var k=a.dii_a1.toString();k+=a.dii_a2.toString();k+=a.mg.toString();k+=a.mi.toString();var v=this._oInternalVizChart.getDataset().getVIZDataset();var b=v._analysisAxis[0]._dimensionLabels;var g=[];jQuery.each(b,function(i,f){g.push(f._values[c.path.dii_a1])});if(this._oSelectedDataList.getItemIndexFor(g,k)!==-1){this._oSelectedDataList.removeItemFrom(g,k)}if(this._oSelectedDataList.getNumberOfItemsFor(g)===0){this._oSelectedDataList.removeGroup(g)}}}}if(this._oChartPopover.isOpen()&&!jQuery.device.is.phone){this._invalidatePopover()}}}}this.fireSelectDataPoint({popover:this._oChartPopover,srcEvent:e,selection:this._oInternalVizChart.selection(),selectedItem:null})};
sap.ca.ui.charts.Chart.prototype.onBeforeRendering=function(){this._deregisterEvent()};
sap.ca.ui.charts.Chart.prototype.onAfterRendering=function(){if(jQuery.device.is.desktop){jQuery(window).bind("resize",jQuery.proxy(this._onResize,this))}else{sap.ui.Device.orientation.attachHandler(this._onOrientationChange,this);sap.ui.Device.resize.attachHandler(this._onResize,this)}jQuery(this._oScrollContainer.getDomRef()).attr("dir","ltr")};
sap.ca.ui.charts.Chart.prototype._onResize=function(){if(this._sDelayedResize){jQuery.sap.clearIntervalCall(this._sDelayedResize)}this._sDelayedResize=jQuery.sap.delayedCall(200,this,this._onResizeInt)};
sap.ca.ui.charts.Chart.prototype._onResizeInt=function(){this._oSelectedDataList.reset();this._closePopover();var d=this._oInternalVizChart.getDataset();if(!d){return}var v=d.getVIZDataset();var s=parseInt(this.getMinShapeSize());if(v&&!v._emptyDataset&&v._analysisAxis.length>0){var S=v._analysisAxis[0]._dimensionLabels[0]._values.length;var p=S;var i=0;if(!this.getStackedChartWidthEnhancer()&&v._analysisAxis[1]!=null){S*=v._analysisAxis[1]._dimensionLabels[0]._values.length;i=S}if(!this._vizChartType.stacked){S*=v._measures.length;i=S*(v._measures.length-1)}var c=(S*s)+(p*s)+(i*4);var a=this.getWidth();var b=this.getHeight();var e=parseInt(a);var f=parseInt(b);if(jQuery.sap.endsWith(a,"%")||a=="auto"){if(this.getParent()!=null&&this.getParent().getDomRef()!=null&&this.$().parents('[class^=sapUiRespGridSpan]').length==0){var D=this.$();var P=D.parents('.sapMPage').first();var $=P.children('section').first();var h=$.parents('.sapMNavItemHidden');if(h.length!=0){h.removeClass('sapMNavItemHidden')}if($.length==0){$=this.getParent().$().parents('section').first()}if($.length==0){$=D.parents('body').first()}var g=$.width();var j=0;if($&&$.offset()){j=$.offset().left}var E=0;if(D&&D.offset()){E=D.offset().left}var k=1;var l=D;while(l!=null&&l.length!=0&&l.attr("id")!=$.attr("id")){var m=parseInt(l.css("margin-right"));var n=parseInt(l.css("padding-right"));var o=parseInt(l.css("border-right-width"));if(!isNaN(m)){k+=m}if(!isNaN(n)){k+=n}if(!isNaN(o)){k+=o}l=l.parent()}if(h.length!=0){h.addClass('sapMNavItemHidden')}e=(g-(E-j)-k)}else if(this.$().parents('[class^=sapUiRespGridSpan]').length!=0){e=this.$().parents('[class^=sapUiRespGridSpan]').first().width()}else if(this.getUIArea()){e=jQuery(this.getUIArea().oRootNode).width()}else{e="800"}e=(e*parseInt(a))/100}if(jQuery.sap.endsWith(b,"%")||b=="auto"){if(this.getParent()!=null&&this.getParent().getDomRef()!=null){var D=this.$();var P=D.parents('.sapMPage').first();var $=P.children('section').first();var h=$.parents('.sapMNavItemHidden');if(h.length!=0){h.removeClass('sapMNavItemHidden')}if($.length==0){$=this.getParent().$().parents('section').first()}if($.length==0){$=D.parents('body').first()}var q=$.height()-2;var r=0;if($&&$.offset()){r=$.offset().top}var t=0;if(D&&D.offset()){t=D.offset().top}var u=0;if(D){u=parseInt(D.css("padding-top"))}var w=0;var l=D;while(l!=null&&l.length!=0&&l.attr("id")!=$.attr("id")){var x=parseInt(l.css("margin-bottom"));var y=parseInt(l.css("padding-bottom"));var z=parseInt(l.css("border-bottom-width"));if(!isNaN(m)){w+=x}if(!isNaN(y)){w+=y}if(!isNaN(z)){w+=z}l=l.parent()}if(h.length!=0){h.addClass('sapMNavItemHidden')}f=(q-(t-r)-w-u)}else if(this.getUIArea()){f=jQuery(this.getUIArea().oRootNode).height()}else{f="480"}if(sap.ui.Device.browser.internet_explorer&&sap.ui.Device.browser.version>10){if(this._oInternalVizChart.$()){var V=parseInt(this._oInternalVizChart.$().css("margin-top"));if(!isNaN(V)&&V>0){f=f-V}var A=parseInt(this._oInternalVizChart.$().css("margin-bottom"));if(!isNaN(A)&&A>0){f=f-A}}}if(this.getParent()&&this.getParent()instanceof sap.ca.ui.charts.ChartToolBar&&parseInt(b)!=100){var B=this.getParent().$().find(".sapMBar").height();f=(((f+B)*parseInt(b))/100)-B}else{f=(f*parseInt(b))/100}}var C={height:0,width:0};if($){var F=$.get(0);if(F&&F.scrollHeight>F.clientHeight){C=jQuery.sap.scrollbarSize()}}if(f==0){f=100;jQuery.sap.delayedCall(200,this,this.invalidate)}if(this._vizChartType.scroll.horizontal){if(c>e){this._oInternalVizChart.setWidth(c+"px");C=jQuery.sap.scrollbarSize();if(this._oScrollContainer.$()){this._oScrollContainer.$().width(e+"px")}}else{this._oInternalVizChart.setWidth(e+"px")}this._oInternalVizChart.setHeight((f-C.height)+"px")}else if(this._vizChartType.scroll.vertical){C=jQuery.sap.scrollbarSize();if(c>f){this._oInternalVizChart.setHeight(c+"px");this._oScrollContainer.setHeight(f+"px");if(this._oScrollContainer.$()){this._oScrollContainer.$().height(f+"px")}}else{this._oInternalVizChart.setHeight(f+"px");this._oScrollContainer.setHeight("100%");if(this._oScrollContainer.$()){this._oScrollContainer.$().height("100%")}}this._oInternalVizChart.setWidth((e-C.width)+"px")}else{this._oInternalVizChart.setWidth(e+"px");this._oInternalVizChart.setHeight(f+"px")}if(this._oInternalVizChart.$()){this._oInternalVizChart.$().height(this._oInternalVizChart.getHeight());this._oInternalVizChart.$().width(this._oInternalVizChart.getWidth())}}else if(!v||v._emptyDataset){this._oScrollContainer.setHeight("100%");this._oScrollContainer.setWidth("100%");if(this._oScrollContainer.$()){this._oScrollContainer.$().height("100%");this._oScrollContainer.$().width("100%")}this._oInternalVizChart.setWidth("100%");this._oInternalVizChart.setHeight('100%');if(this._oInternalVizChart.$()){this._oInternalVizChart.$().height('100%');this._oInternalVizChart.$().width("100%")}}};
sap.ca.ui.charts.Chart.prototype._onOrientationChange=function(e){var i=e.landscape;if(this._vizChartType.scroll.horizontal){if(i){if(this._oScrollContainer.$()){this._oScrollContainer.$().width("100%")}}}this._onResize()};
sap.ca.ui.charts.Chart.prototype.setPopoverSubHeader=function(s){if(s&&s instanceof sap.m.Bar){this._oChartPopover.setSubHeader(s)}};
sap.ca.ui.charts.Chart.prototype.setPopoverFooter=function(f){if(f){if(f instanceof sap.m.Bar){if(!jQuery.device.is.phone){this._oChartPopover._oControl.setFooter(f)}else{var p=new sap.m.Page({showHeader:false,showFooter:true,footer:f,content:[this._oSelectedDataList.getControl()]});this._oChartPopover.destroyContent();this._oChartPopover.addContent(p)}}else if(f instanceof sap.ui.core.Control){if(!jQuery.device.is.phone){this._oChartPopover.addContent(f)}else{f.addStyleClass('sapCaUiPopOverFooter');var p=new sap.m.Page({showHeader:false,showFooter:false,content:[this._oSelectedDataList.getControl(),f]});this._oChartPopover.destroyContent();this._oChartPopover.addContent(p)}}}};
sap.ca.ui.charts.Chart.prototype.setNoData=function(c){this._oInternalVizChart.setNoData(c);return this};
sap.ca.ui.charts.Chart.prototype.getNoData=function(){return this._oInternalVizChart.getNoData()};
