/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
sap.ui.controller("sap.ca.ui.quickoverview.Quickview",{onInit:function(){try{jQuery.sap.require("sap.ushell.services.CrossApplicationNavigation")}catch(e){}var f=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService;if(f){this.oCrossAppNavigator=f&&f("CrossApplicationNavigation")}},onExtNav:function(e,d){var c=d.callback;if(typeof(c)=="function"){var C=c(this.getView());if(C.target.semanticObject&&C.target.action){var h=(this.oCrossAppNavigator&&this.oCrossAppNavigator.hrefForExternal({target:{semanticObject:C.target.semanticObject,action:C.target.action},params:C.params}));sap.m.URLHelper.redirect(h);var _="qvPopover";var p=sap.ui.getCore().byId(_);if(p&&p.isOpen()){p.close();jQuery.sap.log.info("Close QuickOverview")}}}},onBeforeRendering:function(){},configureView:function(){var a={};a.bHeader=true;a.bSubview=true;if(a.bHeader){this.configHeader()}var s=this.viewConfig.subViewName;var v=this.byId("QVVBox");if(s&&a.bSubview){var A=sap.ui.getCore().byId(s);if(!A){A=new sap.ui.core.mvc.XMLView(s,{viewName:s});A.getController().QuickViewHandler=this.viewConfig.quickOverview;A.getController().HostingView=this.getView()}var m=this.getView().getModel();v.removeAllItems();v.addItem(A);A.setModel(m)}else{v.removeAllItems()}var q={};q.oQvView=this.getView();q.oSubView=A;return q},configHeader:function(){var i=this.viewConfig.headerImgURL;if(!i){i="sap-icon://picture"}var h=this.byId("HeaderBox");h.destroyItems();h.removeAllItems();var s=new sap.m.ObjectAttribute({text:this.viewConfig.headerSubTitle});var c=this.viewConfig.beforeExtNavSubHdr;if(typeof(c)=="function"){var d={};s.setActive(true);d.callback=c;s.attachPress(d,this.onExtNav,this)}var H=new sap.m.ObjectHeader({title:this.viewConfig.headerTitle,attributes:[s]});var C=this.viewConfig.beforeExtNav;if(typeof(C)=="function"){var D={};H.setTitleActive(true);D.callback=C;H.attachTitlePress(D,this.onExtNav,this)}if(!this.viewConfig.headerNoIcon){H.setIcon(i);H.addStyleClass("sapCaUiQuickOverviewHdrImgColor")}h.addItem(H)},});
