/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.ui.charts.ClusterList");jQuery.sap.require("sap.m.List");jQuery.sap.require("sap.ca.ui.utils.resourcebundle");jQuery.sap.require("sap.ui.model.json.JSONModel");jQuery.sap.require("sap.ui.core.Element");jQuery.sap.require("sap.ca.ui.charts.ClusterListItem");sap.ui.core.Element.extend("sap.ca.ui.charts.ClusterList",{metadata:{publicMethods:["getControl","isEmpty","reset","createObject","removeObject","getObject","hasObject","count","update","getGroupIndexFor","addGroup","removeGroup","getItemIndexFor","addItemTo","removeItemFrom","getNumberOfItemsFor"]}});
sap.ca.ui.charts.ClusterList.prototype.init=function(){var m=new sap.ui.model.json.JSONModel({"items":[]});this._sModelName=this.getId()+"-Model";this.setModel(m,this._sModelName);var i=new sap.ca.ui.charts.ClusterListItem({title:"{title}",items:"{items}"});this._oList=new sap.m.List({inset:true});this._oList.setModel(this.getModel(this._sModelName));this._oList.bindAggregation("items","/items",i);this._oList.setShowNoData(false)};
sap.ca.ui.charts.ClusterList.prototype.getControl=function(){return this._oList};
sap.ca.ui.charts.ClusterList.prototype.isEmpty=function(){var g=this.getModel(this._sModelName).getProperty("/items");return g.length===0};
sap.ca.ui.charts.ClusterList.prototype.reset=function(){this.getModel(this._sModelName).setProperty("/items",[])};
sap.ca.ui.charts.ClusterList.prototype.destroy=function(s){sap.ui.core.Element.prototype.destroy.apply(this,s);this.reset();if(this._oList){this._oList.destroy(s)}};
sap.ca.ui.charts.ClusterList.prototype.createObject=function(p){if(typeof p==="undefined"){throw new Error("The 'path' is undefined!")}var o=undefined;var i=this.getModel(this._sModelName).getProperty("/items");p.split(".").forEach(function(k,n,a){var f=false;jQuery.each(i,function(n,I){if(I["key"]===k){o=I;i=I["items"];f=true;return false}});if(!f){o={key:k,items:[]};i.push(o);i=o["items"]}});return o};
sap.ca.ui.charts.ClusterList.prototype.removeObject=function(p){if(typeof p==="undefined"){throw new Error("The 'path' is undefined!")}var i=this.getModel(this._sModelName).getProperty("/items");var n=-1;p.split(".").forEach(function(k,a,A){jQuery.each(i,function(b,I){if(I["key"]===k){if(a<A.length-1){i=I["items"]}else{n=b}return false}})});if(n!==-1){i.splice(n,1)}};
sap.ca.ui.charts.ClusterList.prototype.getObject=function(p){if(typeof p==="undefined"){throw new Error("The 'path' is undefined!")}var r=undefined;var i=this.getModel(this._sModelName).getProperty("/items");p.split(".").forEach(function(k,n,a){if(typeof i==="undefined"){return true}var f=false;jQuery.each(i,function(n,I){if(I["key"]===k){i=I["items"];f=true;return false}});if(f){r=i}else{r=undefined;return false}});return r};
sap.ca.ui.charts.ClusterList.prototype.hasObject=function(p){if(typeof p==="undefined"){throw new Error("The 'path' is undefined!")}if(p.indexOf(".")===-1){return typeof this.getObject(p)!=="undefined"}var i=this.getObject(p.substring(0,p.lastIndexOf(".")));if(typeof i==="undefined"){return false}var k=p.substring(p.lastIndexOf(".")+1);var r=false;jQuery.each(i,function(n,I){if(I["key"]===k){r=true;return false}});return r};
sap.ca.ui.charts.ClusterList.prototype.count=function(p){if(typeof p==="undefined"){throw new Error("The 'path' is undefined!")}var o=this.getObject(p);if(typeof o==="undefined"){return 0}return o.length};
sap.ca.ui.charts.ClusterList.prototype.update=function(){this.getModel(this._sModelName).updateBindings(true)};
sap.ca.ui.charts.ClusterList.prototype.getGroupIndexFor=function(g){if(typeof g==="undefined"||!Array.isArray(g)||g.length===0){throw new Error("The group 'key' is undefined!")}var n=-1;var G=this.getModel(this._sModelName).getProperty("/items");jQuery.each(G,function(a,o){if(o["key"].toString()===g.toString()){n=a;return false}});return n};
sap.ca.ui.charts.ClusterList.prototype.addGroup=function(d){if(Array.isArray(d)){var n;for(n in d){this._addGroup(d[n])}}else{this._addGroup(d)}};
sap.ca.ui.charts.ClusterList.prototype._addGroup=function(d){var k=d["key"];if(typeof k==="undefined"||!Array.isArray(k)||k.length===0){throw new Error("The group 'key' is undefined!")}if(this.getGroupIndexFor(k)!==-1){throw new Error("Group already exist with '"+k.toString()+"' key!")}var g=this.getModel(this._sModelName).getProperty("/items");if(!d.hasOwnProperty("items")){d["items"]=[]}d["key"]=k.toString();if(!d.hasOwnProperty("subgroups")){d["subgroups"]=[]}if(k.length>1){var p=k.slice(0);p.splice(k.length-1,1);var n=this.getGroupIndexFor(p);if(n===-1){throw new Error("Group does not exist for '"+p.toString()+"' key!")}var P=g[n];var s=P["subgroups"];if(typeof s==="undefined"||!Array.isArray(s)){throw new Error("The group 'subgroups' is undefined!")}s.push(k.toString())}g.push(d);this.getModel(this._sModelName).setProperty("/items",g)};
sap.ca.ui.charts.ClusterList.prototype.removeGroup=function(g){if(typeof g==="undefined"||!Array.isArray(g)||g.length===0){jQuery.sap.log.error("The group 'key' is undefined!");return}var n=this.getGroupIndexFor(g);if(n===-1){jQuery.sap.log.warning("Group does not exist for '"+g.toString()+"' key!");return}var G=this.getModel(this._sModelName).getProperty("/items");G.splice(n,1);if(g.length>1){var p=g.slice(0);var i;for(i=g.length-1;i>0;i--){var c=p.toString();p.splice(i,1);var a=this.getGroupIndexFor(p);if(a!==-1){var P=G[a];var s=P["subgroups"];var b=-1;jQuery.each(s,function(n,S){if(S===c){b=n}});if(b!==-1){s.splice(b,1);if(s.length===0){G.splice(a,1)}}}}}this.getModel(this._sModelName).setProperty("/items",G)};
sap.ca.ui.charts.ClusterList.prototype.getItemIndexFor=function(g,i){var n=-1;if(typeof g==="undefined"||!Array.isArray(g)||g.length===0){jQuery.sap.log.error("The group 'key' is undefined!");return n}if(typeof i==="undefined"){jQuery.sap.log.error("The item 'key' is undefined!");return n}var a=this.getGroupIndexFor(g);if(a===-1){jQuery.sap.log.warning("Group does not exist for '"+g.toString()+"' key!");return n}var G=this.getModel(this._sModelName).getProperty("/items");var o=G[a];var I=o["items"];jQuery.each(I,function(b,c){if(c["key"]===i){n=b;return false}});return n};
sap.ca.ui.charts.ClusterList.prototype.addItemTo=function(g,d){if(Array.isArray(d)){var n;for(n in d){this._addItemTo(g,d[n])}}else{this._addItemTo(g,d)}this.getModel(this._sModelName).updateBindings(true)};
sap.ca.ui.charts.ClusterList.prototype._addItemTo=function(g,d){if(typeof g==="undefined"||!Array.isArray(g)||g.length===0){throw new Error("The group 'key' is undefined!")}if(this.getItemIndexFor(g,d["key"])!==-1){throw new Error("Item already exist with '"+d["key"]+"' key!")}var n=this.getGroupIndexFor(g);var G=this.getModel(this._sModelName).getProperty("/items");var o=G[n];o["items"].push(d);G[n]=o;this.getModel(this._sModelName).setProperty("/items",G)};
sap.ca.ui.charts.ClusterList.prototype.removeItemFrom=function(g,i){if(typeof g==="undefined"||!Array.isArray(g)||g.length===0){jQuery.sap.log.error("The group 'key' is undefined!");return}if(typeof i==="undefined"){jQuery.sap.log.error("The item 'key' is undefined!");return}var n=this.getGroupIndexFor(g);if(n===-1){jQuery.sap.log.warning("Group does not exist for '"+g.toString()+"' key!");return}var a=this.getItemIndexFor(g,i);if(a===-1){jQuery.sap.log.warning("Item does not exist for '"+i+"' key!");return}var G=this.getModel(this._sModelName).getProperty("/items");var o=G[n];var I=o["items"];I.splice(a,1);o["items"]=I;G[n]=o;this.getModel(this._sModelName).setProperty("/items",G);this.getModel(this._sModelName).updateBindings(true)};
sap.ca.ui.charts.ClusterList.prototype.getNumberOfItemsFor=function(g){if(typeof g==="undefined"||!Array.isArray(g)||g.length===0){jQuery.sap.log.error("The group 'key' is undefined!");return 0}var n=this.getGroupIndexFor(g);if(n===-1){jQuery.sap.log.warning("Group does not exist for '"+g.toString()+"' key!");return 0}var G=this.getModel(this._sModelName).getProperty("/items");var o=G[n];var i=o["items"];return i.length};
