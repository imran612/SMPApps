/*
 * Copyright (C) 2009-2014 SAP SE or an SAP affiliate company. All rights reserved
 */
jQuery.sap.declare("sap.ca.scfld.md.app.DetailHeaderFooterHelper");jQuery.sap.require("sap.ca.scfld.md.app.CommonHeaderFooterHelper");sap.ui.base.Object.extend("sap.ca.scfld.md.app.DetailHeaderFooterHelper",{constructor:function(a){this.oAppImp=a;this.oCommonHeaderFooterHelper=new sap.ca.scfld.md.app.CommonHeaderFooterHelper(a,undefined,true)},defineDetailHeaderFooter:function(c){var o=c.getHeaderFooterOptions();this.setHeaderFooter(c,o)},setHeaderFooter:function(c,o,k){if(!o){return}var p=this.oCommonHeaderFooterHelper.startBuild(c,o,null,k);this.defineHeader(c,p);this.defineFooter(c,p);this.oAppImp.oCurController.DetailCtrl=c;this.oAppImp.oCurController.FullCtrl=null;this.oCommonHeaderFooterHelper.endBuild(c)},defineFooter:function(c,p){var h=this.oCommonHeaderFooterHelper.defineFooterRight(c,p,1000,false,true,true);p.setShowFooter(h||!!c.isMainScreen())},defineHeader:function(c,p){var s=!this.oAppImp.bIsPhone&&(c.isMainScreen()==true);this.oCommonHeaderFooterHelper.ensureHeader(c,p,this.oAppImp.bIsPhone,s);if(c._oHeaderFooterOptions.oHeaderBtnSettings){this.oCommonHeaderFooterHelper.setAppHeaderBtn(c,c._oHeaderFooterOptions.oHeaderBtnSettings)}if(c._oHeaderFooterOptions.oUpDownOptions){this.setUpDownButtons(c,c._oHeaderFooterOptions.oUpDownOptions.iPosition,c._oHeaderFooterOptions.oUpDownOptions.iCount);var P=this.getPositionPars(c);if(this.oAppImp.bIsPhone){if(c._oHeaderFooterOptions.oUpDownOptions.sI18NPhoneTitle){var b=this.oAppImp.getResourceBundle();var k=c._oHeaderFooterOptions.oUpDownOptions.sI18NPhoneTitle}else{var b=this.oAppImp.getUiLibResourceBundle();var k="ITEM_TITLE_PHONE"}}else{if(c._oHeaderFooterOptions.oUpDownOptions.sI18NDetailTitle){var b=this.oAppImp.getResourceBundle();var k=c._oHeaderFooterOptions.oUpDownOptions.sI18NDetailTitle}else{var b=this.oAppImp.getUiLibResourceBundle();var k="ITEM_TITLE"}}var t=b.getText(k,P)}else{this.setUpDownButtons(c,0,0);if(c._oHeaderFooterOptions.sI18NDetailTitle){var b=this.oAppImp.getResourceBundle();var t=b.getText(c._oHeaderFooterOptions.sI18NDetailTitle)}else if(c._oHeaderFooterOptions.sDetailTitle){var t=c._oHeaderFooterOptions.sDetailTitle}else{var b=this.oAppImp.getResourceBundle();var t=b.getText("DETAIL_TITLE")}}c._oControlStore.oTitle.setText(t)},setUpDownButtons:function(c,p,C){if(C<=1){if(c._oControlStore.oUpButton){c._oControlStore.oUpButton.setVisible(false);c._oControlStore.oDownButton.setVisible(false)}}else{if(!c._oControlStore.oUpButton){var m=function(d){c._oHeaderFooterOptions.oUpDownOptions.fSetPosition(c._oHeaderFooterOptions.oUpDownOptions.iPosition+d)};c._oControlStore.oUpButton=new sap.m.Button();c._oControlStore.oUpButton.setIcon("sap-icon://down");c._oControlStore.oUpButton.attachPress(function(){m(1)});c._oControlStore.oHeaderBar.addContentRight(c._oControlStore.oUpButton);c._oControlStore.oDownButton=new sap.m.Button();c._oControlStore.oDownButton.setIcon("sap-icon://up");c._oControlStore.oDownButton.attachPress(function(){m(-1)});c._oControlStore.oHeaderBar.addContentRight(c._oControlStore.oDownButton)}c._oControlStore.oUpButton.setVisible(true);c._oControlStore.oDownButton.setVisible(true);c._oControlStore.oUpButton.setEnabled(p<C-1);c._oControlStore.oDownButton.setEnabled(p>0)}},getPositionPars:function(c){if(c._oHeaderFooterOptions){var r=[c._oHeaderFooterOptions.oUpDownOptions.iPosition+1,c._oHeaderFooterOptions.oUpDownOptions.iCount];if(c._oHeaderFooterOptions.oUpDownOptions.oParent){r=r.concat(this.getPositionPars(c._oHeaderFooterOptions.oUpDownOptions.oParent))}return r}return[]}});
